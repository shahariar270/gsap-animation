<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple GSAP Split</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 60px;
            font-size: 36px;
        }

        .split-text span {
            display: inline-block;
            opacity: 0;
            /* initial state for smooth animation */
        }
    </style>
</head>

<body>
    <div class="wrapper" data-anim="fade" data-split="char">
        <span>Animate character by character</span>
    </div>

    <div class="wrapper" data-anim="scale" data-split="word">
        <h1>Animate word by word</h1>
    </div>

    <div class="wrapper" data-anim="blink" data-split="line">
        <p>Line one<br>Line two<br>Line three</p>
    </div>



    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>

    <script>
        function splitText(element, mode = "char") {
            const text = element.innerText.trim();
            element.innerHTML = ""; // clear element

            let items = [];

            if (mode === "char") {
                text.split("").forEach(char => {
                    const span = document.createElement("span");
                    span.textContent = char === " " ? "\u00A0" : char;
                    span.style.display = "inline-block";
                    element.appendChild(span);
                    items.push(span);
                });
            } else if (mode === "word") {
                const words = text.match(/\S+\s*/g); // matches word + following spaces
                words.forEach(word => {
                    const span = document.createElement("span");
                    span.textContent = word;
                    span.style.display = "inline-block";
                    element.appendChild(span);
                    items.push(span);
                });
            } else if (mode === "line") {
                const lines = text.split("\n");
                lines.forEach(line => {
                    const div = document.createElement("div");
                    div.textContent = line;
                    div.style.display = "block";
                    element.appendChild(div);
                    items.push(div);
                });
            }

            return items;
        }

        const wrappers = document.querySelectorAll(".wrapper");

        wrappers.forEach((wrapper, index) => {
            const target = wrapper.querySelector("h1, h2, h3, h4, h5, h6, p, span, div");
            if (!target) return;

            const splitMode = wrapper.dataset.split || "char";
            const lettersOrWords = splitText(target, splitMode);

            const animType = wrapper.dataset.anim || "fade";

            let animSettings = { duration: 0.5, stagger: 0.03, ease: "power2.out", delay: index * 0.2 };

            switch (animType) {
                case "fade":
                    animSettings.opacity = 0;
                    animSettings.y = 20;
                    break;
                case "scale":
                    animSettings.opacity = 0;
                    animSettings.scale = 0.3;
                    break;
                case "blink":
                    animSettings.opacity = 0;
                    animSettings.repeat = 3;
                    animSettings.yoyo = true;
                    animSettings.duration = 0.2;
                    break;
                default:
                    animSettings.opacity = 0;
                    animSettings.y = 20;
            }

            gsap.from(lettersOrWords, animSettings);
        });
    </script>

</body>

</html>